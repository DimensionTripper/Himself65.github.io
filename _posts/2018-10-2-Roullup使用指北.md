---
layout: post
title: "Rollup使用指北"
subtitle: ""
date: 2018-10-2 24:00:00
author: "Himself65"
header-img: "img/head_post/2018-4-5-01.jpg"
tags: 
    - Nodejs
    - Vue
    - Rollup
---
# 前言

最近在学Rollup，顺便写一下笔记，持续更新...

## `Rollup`是什么

// TODO

## `Rollup`基本配置

// TODO

## `Rollup`更多插件的使用

### [rollup-plugin-node-resolve](https://github.com/rollup/rollup-plugin-node-resolve)

```js
import shit from 'shit';
import _ from 'lodash';
```

如果没有这个插件，那么 `_` 会被全部引用

### [rollup-plugin-uglify](https://github.com/rollup/rollup-plugin-uglify)

减小打包文件的体积，建议在 `prod` 环境下使用

```js
import uglify from 'rollup-plugin-uglify'
...
if (nodeEnv === prod) {
  plugins.push(
    uglify() // minify generated bundle
  )
}
```

### [rollup-plugin-commonjs](https://github.com/rollup/rollup-plugin-commonjs)

将CommonJS转成ES2015，应该放到所有插件的最上面（`resolve`的下面），防止影响其检测

**放在babel上面**

### [rollup-plugin-babel](https://github.com/rollup/rollup-plugin-babel)

可以使用 `babel` ，首先你得有一个 `.babelrc` ，然其中

```json
{
  "presets": [
    [
      "env",
      {
        "modules": false
      }
    ]
  ],
  "plugins": [
    "external-helpers"
  ]
}
```

> 这个设置有一些不寻常的地方。首先，我们设置`"modules": false`，否则 `Babel` 会在 `Rollup` 有机会做处理之前，将我们的模块转成 `CommonJS` ，导致 `Rollup` 的一些处理失败。
>
> 其次，我们使用`external-helpers`插件，它允许 `Rollup` 在包的顶部只引用一次 `helpers`，而不是每个使用它们的模块中都引用一遍（这是默认行为）。

### [rollup-plugin-serve](https://github.com/thgh/rollup-plugin-serve)

好比 `webpack-dev-server`

### [rollup-plugin-typescript](https://github.com/rollup/rollup-plugin-typescript)

使用 `typescript` ，不解释

### [rollup-plugin-vue](https://github.com/rollup/rollup-plugin-vue)

使用 `vue` ，不解释

---

## 参考文章

[Rollup完全入门](https://segmentfault.com/a/1190000010628352)

[Rollup和React | Typescript集成](https://cacivy.com/2017/12/21/%E4%BD%BF%E7%94%A8Rollup%E5%AE%9E%E7%8E%B0React-Typescript%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/)

[Rollup其他工具的集成](http://www.jiangweishan.com/jiaocheng/rollupjs/tools/#JavaScript-API)